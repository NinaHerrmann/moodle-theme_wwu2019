{"version":3,"sources":["../src/menu.js"],"names":["stickMenu","openMenu","mainMenu","topPos","offset","top","sticky","window","scrollTop","addClass","scroll","removeClass","menuitems","openCandidate","openTimeoutId","closeTimeoutId","mouseenter","ev","currentTarget","clearTimeout","setTimeout","mouseleave"],"mappings":"qIA4BO,UAAgB,CACnBA,CAAS,GACTC,CAAQ,EACX,C,CARD,uDAaA,QAASD,CAAAA,CAAT,EAAqB,IACXE,CAAAA,CAAQ,CAAG,cAAE,YAAF,CADA,CAEXC,CAAM,CAAGD,CAAQ,CAACE,MAAT,GAAkBC,GAFhB,CAGbC,CAAM,CAAG,cAAEC,MAAF,EAAUC,SAAV,GAAwBL,CAHpB,CAIjB,GAAIG,CAAJ,CAAY,CACRJ,CAAQ,CAACO,QAAT,CAAkB,QAAlB,CACH,CACD,cAAEF,MAAF,EAAUG,MAAV,CAAiB,UAAM,CACnB,GAAI,CAACJ,CAAD,EAAW,cAAEC,MAAF,EAAUC,SAAV,GAAwBL,CAAvC,CAA+C,CAC3CD,CAAQ,CAACO,QAAT,CAAkB,QAAlB,EACAH,CAAM,GACT,CAHD,IAGO,IAAIA,CAAM,EAAI,cAAEC,MAAF,EAAUC,SAAV,GAAwBL,CAAtC,CAA8C,CACjDD,CAAQ,CAACS,WAAT,CAAqB,QAArB,EACAL,CAAM,GACT,CACJ,CARD,CASH,CAKD,QAASL,CAAAA,CAAT,EAAoB,IAEZW,CAAAA,CAAS,CAAG,cAAE,mBAAF,CAFA,CAGZX,CAAQ,CAAG,IAHC,CAIZY,CAAa,CAAG,IAJJ,CAKZC,CAAa,CAAG,IALJ,CAMZC,CAAc,CAAG,IANL,CAOhBH,CAAS,CAACI,UAAV,CAAqB,SAACC,CAAD,CAAQ,CACzB,GAAIA,CAAE,CAACC,aAAH,GAAqBjB,CAAzB,CAAmC,CAC/BkB,YAAY,CAACJ,CAAD,CAAZ,CACA,MACH,CAEDF,CAAa,CAAGI,CAAE,CAACC,aAAnB,CACAJ,CAAa,CAAGM,UAAU,CAAC,UAAM,CAC7B,cAAEnB,CAAF,EAAYU,WAAZ,CAAwB,MAAxB,EACA,cAAEM,CAAE,CAACC,aAAL,EAAoBT,QAApB,CAA6B,MAA7B,EACAR,CAAQ,CAAGgB,CAAE,CAACC,aAAd,CACAL,CAAa,CAAG,IAAhB,CACAC,CAAa,CAAG,IACnB,CANyB,KAO7B,CAdD,EAeAF,CAAS,CAACS,UAAV,CAAqB,SAACJ,CAAD,CAAQ,CACzB,GAAIJ,CAAa,EAAII,CAAE,CAACC,aAAH,GAAqBL,CAA1C,CAAyD,CACrDM,YAAY,CAACL,CAAD,CAAZ,CACA,MACH,CACD,GAAIb,CAAQ,EAAIgB,CAAE,CAACC,aAAH,GAAqBjB,CAArC,CAA+C,CAC3Cc,CAAc,CAAGK,UAAU,CAAC,UAAM,CAC9B,cAAEH,CAAE,CAACC,aAAL,EAAoBP,WAApB,CAAgC,MAAhC,EACAV,CAAQ,CAAG,IAAX,CACAc,CAAc,CAAG,IACpB,CAJ0B,KAK9B,CACJ,CAZD,CAaH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage the user menu.\n *\n * @package    theme_wwu2019\n * @copyright  2019 Justus Dieckmann WWU\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\n/**\n * Init function\n */\nexport function init() {\n    stickMenu();\n    openMenu();\n}\n\n/**\n * Adds sticky class to main menu nav when needed.\n */\nfunction stickMenu() {\n    const mainMenu = $('#main-menu');\n    const topPos = mainMenu.offset().top;\n    let sticky = $(window).scrollTop() > topPos;\n    if (sticky) {\n        mainMenu.addClass('sticky');\n    }\n    $(window).scroll(() => {\n        if (!sticky && $(window).scrollTop() > topPos) {\n            mainMenu.addClass('sticky');\n            sticky = true;\n        } else if (sticky && $(window).scrollTop() < topPos) {\n            mainMenu.removeClass('sticky');\n            sticky = false;\n        }\n    });\n}\n\n/**\n * Opens submenu when hovering\n */\nfunction openMenu() {\n    const delay = 400;\n    let menuitems = $('li.main-menu-item');\n    let openMenu = null;\n    let openCandidate = null;\n    let openTimeoutId = null;\n    let closeTimeoutId = null;\n    menuitems.mouseenter((ev) => {\n        if (ev.currentTarget === openMenu) {\n            clearTimeout(closeTimeoutId);\n            return;\n        }\n\n        openCandidate = ev.currentTarget;\n        openTimeoutId = setTimeout(() => {\n            $(openMenu).removeClass('open');\n            $(ev.currentTarget).addClass('open');\n            openMenu = ev.currentTarget;\n            openCandidate = null;\n            openTimeoutId = null;\n        }, delay);\n    });\n    menuitems.mouseleave((ev) => {\n        if (openCandidate && ev.currentTarget === openCandidate) {\n            clearTimeout(openTimeoutId);\n            return;\n        }\n        if (openMenu && ev.currentTarget === openMenu) {\n            closeTimeoutId = setTimeout(() => {\n                $(ev.currentTarget).removeClass('open');\n                openMenu = null;\n                closeTimeoutId = null;\n            }, delay);\n        }\n    });\n}"],"file":"menu.min.js"}